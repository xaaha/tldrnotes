---
import { getCollection } from "astro:content";
import Mainlayout from "@layouts/Mainlayout.astro";
import PostCard from "@components/PostCard.astro";

// get blog posts from the collection.
const allPosts = await getCollection("blog", ({ data }) => {
  return data.draft !== true;
});

// 2. Sort the posts by date, newest first.
const sortedPosts = allPosts.sort(
  (a, b) => b.data.date.getTime() - a.data.date.getTime(),
);
---

<Mainlayout>
  <section class="container" aria-label="New Blog Posts">
    <h1 class="h1">Recent Posts</h1>
    <div class="post-container">
      {
        sortedPosts.map((post) => (
          <PostCard
            frontmatter={post.data}
            url={`/blog/${post.id}`}
            tagType="h2"
          />
        ))
      }
    </div>
  </section>
</Mainlayout>
